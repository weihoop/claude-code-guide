---
name: push
description: 一键提交并推送代码到远程仓库
aliases: [p, commit-push]
---

# 快速提交和推送代码

请按照以下步骤执行代码提交和推送流程：

## 执行步骤

### 1. 检查当前状态

首先运行 `git status` 查看工作区状态，显示：
- 修改的文件列表
- 未跟踪的新文件
- 已暂存的改动

### 2. 添加所有改动

运行 `git add -A` 将所有改动添加到暂存区：
- 修改的文件
- 新增的文件
- 删除的文件

### 3. 确认提交信息

询问用户提交信息，如果用户没有提供，建议根据改动内容生成合适的提交信息：
- 遵循约定式提交规范
- 使用中文描述
- 格式：`<类型>: <简短描述>`

### 4. 执行提交

使用用户提供或生成的提交信息执行提交：
```bash
git commit -m "提交信息"
```

### 5. 推送到远程

获取当前分支名称并推送到远程：
```bash
git push origin <当前分支名>
```

## 提交类型参考

| 类型 | 说明 | 示例 |
|------|------|------|
| feat | 新功能 | `feat: 添加用户登录功能` |
| fix | 修复bug | `fix: 修复空指针异常` |
| docs | 文档更新 | `docs: 更新安装说明` |
| style | 代码格式 | `style: 调整代码缩进` |
| refactor | 重构 | `refactor: 优化数据库查询逻辑` |
| perf | 性能优化 | `perf: 减少API响应时间` |
| test | 测试 | `test: 添加单元测试用例` |
| chore | 其他修改 | `chore: 更新依赖版本` |

## 安全检查

在提交前，确保：
- 不包含敏感信息（密钥、密码等）
- 不包含 `.env` 文件或配置文件中的机密数据
- 代码符合项目规范

## 错误处理

如果推送失败：
1. 检查是否需要先拉取远程更新：`git pull --rebase`
2. 解决可能的冲突
3. 重新推送

如果提交被 pre-commit hook 阻止：
1. 查看错误信息
2. 修复相关问题
3. 重新执行提交
